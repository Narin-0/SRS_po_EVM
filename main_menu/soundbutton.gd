extends Button

# –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–≤—É–∫–∞.
var is_muted = false

# --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---

func _ready():
	# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Master-—à–∏–Ω—ã, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–µ–∫—Å—Ç
	is_muted = AudioServer.is_bus_mute(AudioServer.get_bus_index("Master"))
	update_text()

# --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ ---

func _on_pressed():
	# –ú–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –µ—Å–ª–∏ –±—ã–ª–æ –≤—ã–∫–ª—é—á–µ–Ω–æ, —Å—Ç–∞–Ω–µ—Ç –≤–∫–ª—é—á–µ–Ω–æ, –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
	is_muted = !is_muted
	
	# –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –≥–ª–∞–≤–Ω–æ–π (Master) —à–∏–Ω—ã –∑–≤—É–∫–∞.
	var master_bus_index = AudioServer.get_bus_index("Master")
	
	# –ü—Ä–∏–º–µ–Ω—è–µ–º –∑–∞–≥–ª—É—à–µ–Ω–∏–µ –∫–æ –≤—Å–µ–π –∏–≥—Ä–µ.
	AudioServer.set_bus_mute(master_bus_index, is_muted)
	
	# –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –∫–Ω–æ–ø–∫–µ.
	update_text()

# --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ---

func update_text():
	# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏ –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è is_muted.
	if is_muted:
		text = "üîá–í–´–ö–õ"
	else:
		text = "üîä –í–ö–õ"
